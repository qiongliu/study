<!DOCTYPE html>
<html lang="zh-cn">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
	<meta name="viewport" id="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no">
	<meta name="format-detection" content="telephone=no">
	<title>happy new year!</title>
	<link rel="stylesheet" href="css/index.css">
</head>
<body>
	<div class="music">
		<img src="img/music_pointer.png" alt="">
		<img id="music" class="play" src="img/music_disc.png" alt="">
	</div>
	<div id="page1" class="page page1">
		<div class="bg"></div>
		<div class="p1_lantern"><span>点击屏幕</span></div>
		<div class="p1_imooc"></div>
		<div class="p1_words">恭贺新春</div>
	</div>
	<div id="page2" class="page page2">
		<div class="bg"></div>
		<div class="p2_circle"></div>
		<div class="p2_test">2017</div>
	</div>
	<div id="page3" class="page page3">
		<div class="bg"></div>
		<!-- <div class="p3_logo"></div> -->
		<!-- <div class="p3_title"></div> -->
		<div class="p3_second"></div>
		<div class="p3_first"></div>
		<div class="p3_blessing"></div>
		<div id="back" class="p3_back">返回</div>
	</div>
	<audio autoplay="ture">
		<source src="audio/liangliang.mp3" type="audio/mpeg">
		你的浏览器不支持html5音频播放！
	</audio>
	<script>
		window.onload = function(){
			var music = document.getElementById('music'),
			page1 = document.getElementById('page1'),
			page2 = document.getElementById('page2'),
			page3 = document.getElementById('page3'),
			back = document.getElementById('back'),
			audio = document.getElementsByTagName('audio')[0];

			audio.addEventListener('ended',function(){
				music.setAttribute('class','');
			});

			music.addEventListener('touchstart',function(){
				if(audio.paused) {
					audio.play();
					music.style.animationPlayState = "running";
				} else {
					audio.pause();
					music.style.animationPlayState = "paused";
				}
			});

			page1.addEventListener('touchstart',function(){
				page1.setAttribute('class','page page1 p1_fade_out');
				page2.setAttribute('class','page page2 p2_fade_in');
				page3.style.display = 'block';
				page3.style.top = '100%';

				setTimeout(function(){
					page2.setAttribute('class','page page2 p2_fade_out');
					page3.setAttribute('class','page page3 p3_fade_in');
				},4000);
			});

			back.addEventListener('touchstart',function(){
				page1.style.display = 'block';

				page1.setAttribute('class','page page1');
				page2.setAttribute('class','page page2');
				page3.setAttribute('class','page page3');
			});
		};
	</script>
</body>
</html>